#include "tim2.h"#include "gd32e10x.h"#include "hardware.h"#include "config.h"u16 RepCnt = 0;/*	定时器2 初始化	Tout = ((per + 1) * (psc + 1)) / Tclk	0.05 */void Tim2Init(void){	timer_parameter_struct timer_InitPara;  rcu_periph_clock_enable(RCU_TIMER2);	timer_deinit(TIMER2);	//30 000 000	timer_InitPara.prescaler = 1925; //1999 快了一点	timer_InitPara.counterdirection = TIMER_COUNTER_UP;	timer_InitPara.period = 999;	timer_InitPara.clockdivision = TIMER_CKDIV_DIV4;	timer_InitPara.alignedmode = TIMER_COUNTER_EDGE;	timer_init(TIMER2,&timer_InitPara);		timer_interrupt_flag_clear(TIMER2, TIMER_INT_FLAG_UP);  timer_interrupt_enable(TIMER2, TIMER_INT_UP);    	timer_enable(TIMER2);}/*	定时器2中断服务函数*/void TIMER2_IRQHandler(void){	if(timer_interrupt_flag_get(TIMER2, TIMER_INT_FLAG_UP) == SET)	{		RepCnt++;		//一个上报周期为 2分钟 最大周期数30		if(RepCnt >= 1200 * SysInfo.TerminalRepCycle)		{			RepCnt = 0;		}				timer_interrupt_flag_clear(TIMER2, TIMER_INT_FLAG_UP);	}}